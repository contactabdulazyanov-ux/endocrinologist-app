<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Нарушения обмена веществ - Эндокринолог PRO</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #059669;
            --primary-dark: #047857;
            --secondary: #0d9488;
            --accent: #10b981;
            --success: #059669;
            --warning: #d97706;
            --danger: #dc2626;
            --light: #f0fdf4;
            --dark: #1e293b;
            --text: #374151;
            --text-light: #6b7280;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #86efac 0%, #4ade80 100%);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
            color: var(--text);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
        }

        .header h1 {
            font-size: 2.8em;
            margin-bottom: 15px;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            position: relative;
        }

        .header p {
            font-size: 1.3em;
            opacity: 0.95;
            font-weight: 300;
            position: relative;
        }

        .main-menu {
            display: flex;
            justify-content: center;
            background: var(--dark);
            padding: 20px;
            gap: 8px;
            flex-wrap: wrap;
            backdrop-filter: blur(10px);
        }

        .main-menu a {
            padding: 12px 24px;
            text-decoration: none;
            color: white;
            font-weight: 600;
            border-radius: 50px;
            transition: all 0.3s ease;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            font-size: 0.95em;
        }

        .main-menu a:hover {
            background: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(5, 150, 105, 0.4);
        }

        .main-menu a.active {
            background: var(--primary);
            box-shadow: 0 5px 15px rgba(5, 150, 105, 0.4);
        }

        .content {
            padding: 50px;
        }

        .page-title {
            font-size: 2.2em;
            color: var(--dark);
            margin-bottom: 10px;
            font-weight: 700;
        }

        .page-subtitle {
            font-size: 1.2em;
            color: var(--text-light);
            margin-bottom: 40px;
        }

        .disease-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .disease-card {
            background: linear-gradient(135deg, #ffffff 0%, #f0fdf4 100%);
            border-radius: 16px;
            padding: 30px;
            border: 1px solid #bbf7d0;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            position: relative;
            overflow: hidden;
        }

        .disease-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
        }

        .disease-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 25px 50px -12px rgba(5, 150, 105, 0.25);
            border-color: var(--primary);
        }

        .disease-card h3 {
            color: var(--dark);
            margin-bottom: 20px;
            font-size: 1.5em;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .disease-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            color: white;
        }

        .disease-card ul {
            margin: 20px 0;
            padding-left: 20px;
        }

        .disease-card li {
            margin-bottom: 10px;
            color: var(--text);
            position: relative;
            padding-left: 10px;
        }

        .disease-card li::before {
            content: '•';
            color: var(--primary);
            font-weight: bold;
            position: absolute;
            left: -15px;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 14px 28px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            text-decoration: none;
            border-radius: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            margin-top: 15px;
            font-size: 0.95em;
            box-shadow: 0 4px 15px rgba(5, 150, 105, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(5, 150, 105, 0.4);
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
        }

        .calculator-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
            margin: 40px 0;
        }

        .calculator-card {
            background: linear-gradient(135deg, #ffffff 0%, #f0fdf4 100%);
            border-radius: 16px;
            padding: 30px;
            border: 1px solid #bbf7d0;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .calculator-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(5, 150, 105, 0.15);
        }

        .calculator-card h3 {
            color: var(--dark);
            margin-bottom: 20px;
            font-size: 1.3em;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            border: 1px solid #bbf7d0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .form-group:focus-within {
            border-color: var(--primary);
            box-shadow: 0 4px 15px rgba(5, 150, 105, 0.15);
        }

        .form-group label {
            display: block;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 10px;
            font-size: 1em;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #bbf7d0;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: #f0fdf4;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            background: white;
            box-shadow: 0 0 0 3px rgba(5, 150, 105, 0.1);
        }

        .result-box {
            background: linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%);
            padding: 25px;
            border-radius: 12px;
            margin-top: 20px;
            border: 1px solid #bae6fd;
            display: none;
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .info-section {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            padding: 35px;
            border-radius: 16px;
            margin: 35px 0;
            border: 1px solid #bbf7d0;
        }

        .info-section h3 {
            color: var(--dark);
            margin-bottom: 20px;
            font-size: 1.4em;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        th, td {
            border: 1px solid #bbf7d0;
            padding: 16px;
            text-align: left;
        }

        th {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            font-weight: 600;
            font-size: 0.95em;
        }

        tr:nth-child(even) {
            background: #f0fdf4;
        }

        tr:hover {
            background: #dcfce7;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .feature-item {
            text-align: center;
            padding: 25px;
            background: white;
            border-radius: 12px;
            border: 1px solid #bbf7d0;
            transition: all 0.3s ease;
        }

        .feature-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(5, 150, 105, 0.1);
        }

        .feature-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .calculator-value {
            font-size: 2.5em;
            font-weight: 800;
            color: var(--primary);
            text-align: center;
            margin: 15px 0;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .risk-indicator {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            margin-left: 10px;
        }

        .risk-low { background: #dcfce7; color: #166534; }
        .risk-medium { background: #fef3c7; color: #92400e; }
        .risk-high { background: #fecaca; color: #991b1b; }

        @media (max-width: 768px) {
            .content {
                padding: 30px 20px;
            }
            
            .disease-grid, .calculator-grid {
                grid-template-columns: 1fr;
            }
            
            .main-menu {
                flex-direction: column;
                align-items: center;
            }
            
            .main-menu a {
                width: 100%;
                text-align: center;
            }
            
            .header h1 {
                font-size: 2.2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>⚖️ ОБМЕН ВЕЩЕСТВ</h1>
            <p>Комплексная диагностика и коррекция метаболических нарушений</p>
        </div>

        <nav class="main-menu">
            <a href="../../index.html">🏠 Главная</a>
            <a href="../thyroid/index.html">🦋 Щитовидная железа</a>
            <a href="../diabetes/index.html">💉 Сахарный диабет</a>
            <a href="index.html" class="active">⚖️ Обмен веществ</a>
            <a href="../adrenal/index.html">🧠 Надпочечники</a>
        </nav>

        <div class="content">
            <h1 class="page-title">Нарушения обмена веществ</h1>
            <p class="page-subtitle">Диагностика, лечение и профилактика метаболических заболеваний</p>

            <!-- Быстрый доступ -->
            <div class="feature-grid">
                <div class="feature-item">
                    <div class="feature-icon">📊</div>
                    <h3>Ожирение</h3>
                    <p>Оценка ИМТ и состава тела</p>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">🔄</div>
                    <h3>Метаболический синдром</h3>
                    <p>Комплексная диагностика</p>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">🩸</div>
                    <h3>Дислипидемия</h3>
                    <p>Липидный профиль и риски</p>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">🍎</div>
                    <h3>Питание</h3>
                    <p>Диетотерапия и коррекция</p>
                </div>
            </div>

            <div class="disease-grid">
                <div class="disease-card">
                    <h3><div class="disease-icon">🍎</div> Ожирение</h3>
                    <p>Избыточное накопление жировой ткани:</p>
                    <ul>
                        <li>Расчет ИМТ и окружности талии</li>
                        <li>Оценка состава тела</li>
                        <li>Диетотерапия и физическая активность</li>
                        <li>Медикаментозное лечение и бариатрия</li>
                    </ul>
                    <a href="obesity.html" class="btn">📖 Подробнее</a>
                </div>

                <div class="disease-card">
                    <h3><div class="disease-icon">🔄</div> Метаболический синдром</h3>
                    <p>Комплекс метаболических нарушений:</p>
                    <ul>
                        <li>Абдоминальное ожирение</li>
                        <li>Инсулинорезистентность</li>
                        <li>Дислипидемия</li>
                        <li>Артериальная гипертензия</li>
                    </ul>
                    <a href="syndrome.html" class="btn">📖 Подробнее</a>
                </div>

                <div class="disease-card">
                    <h3><div class="disease-icon">🩸</div> Дислипидемия</h3>
                    <p>Нарушения липидного обмена:</p>
                    <ul>
                        <li>Повышение холестерина ЛПНП</li>
                        <li>Снижение холестерина ЛПВП</li>
                        <li>Повышение триглицеридов</li>
                        <li>Статины и другие гиполипидемические средства</li>
                    </ul>
                    <a href="dyslipidemia.html" class="btn">📖 Подробнее</a>
                </div>
            </div>

            <!-- Калькуляторы для метаболических нарушений -->
            <div class="info-section">
                <h3>🧮 Калькуляторы метаболических показателей</h3>
                <p class="section-subtitle">Инструменты для оценки рисков и коррекции нарушений</p>
                
                <div class="calculator-grid">
                    <!-- Калькулятор ИМТ -->
                    <div class="calculator-card">
                        <h3>⚖️ Индекс массы тела</h3>
                        <div class="form-group">
                            <label for="height">Рост (см)</label>
                            <input type="number" id="height" placeholder="Например: 175">
                        </div>
                        <div class="form-group">
                            <label for="bmiWeight">Вес (кг)</label>
                            <input type="number" id="bmiWeight" placeholder="Например: 70">
                        </div>
                        <button class="btn" onclick="calculateBMI()">📊 Рассчитать ИМТ</button>
                        <div id="bmiResult" class="result-box"></div>
                    </div>

                    <!-- Калькулятор основного обмена -->
                    <div class="calculator-card">
                        <h3>🔥 Основной обмен</h3>
                        <div class="form-group">
                            <label for="bmrWeight">Вес (кг)</label>
                            <input type="number" id="bmrWeight" placeholder="Например: 70">
                        </div>
                        <div class="form-group">
                            <label for="bmrHeight">Рост (см)</label>
                            <input type="number" id="bmrHeight" placeholder="Например: 175">
                        </div>
                        <div class="form-group">
                            <label for="bmrAge">Возраст (лет)</label>
                            <input type="number" id="bmrAge" placeholder="Например: 35">
                        </div>
                        <div class="form-group">
                            <label for="bmrGender">Пол</label>
                            <select id="bmrGender">
                                <option value="male">Мужской</option>
                                <option value="female">Женский</option>
                            </select>
                        </div>
                        <button class="btn" onclick="calculateBMR()">🔥 Рассчитать ОО</button>
                        <div id="bmrResult" class="result-box"></div>
                    </div>

                    <!-- Калькулятор риска метаболического синдрома -->
                    <div class="calculator-card">
                        <h3>🔄 Риск метаболического синдрома</h3>
                        <div class="form-group">
                            <label for="waist">Окружность талии (см)</label>
                            <input type="number" id="waist" placeholder="Например: 95">
                        </div>
                        <div class="form-group">
                            <label for="gender">Пол</label>
                            <select id="gender">
                                <option value="male">Мужской</option>
                                <option value="female">Женский</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="fastingGlucose">Глюкоза натощак (ммоль/л)</label>
                            <input type="number" step="0.1" id="fastingGlucose" placeholder="Например: 5.5">
                        </div>
                        <div class="form-group">
                            <label for="triglycerides">Триглицериды (ммоль/л)</label>
                            <input type="number" step="0.1" id="triglycerides" placeholder="Например: 1.8">
                        </div>
                        <button class="btn" onclick="calculateMetabolicRisk()">🔄 Оценить риск</button>
                        <div id="metabolicResult" class="result-box"></div>
                    </div>

                    <!-- Калькулятор липидного профиля -->
                    <div class="calculator-card">
                        <h3>🩸 Оценка липидного профиля</h3>
                        <div class="form-group">
                            <label for="totalCholesterol">Общий холестерин (ммоль/л)</label>
                            <input type="number" step="0.1" id="totalCholesterol" placeholder="Например: 5.2">
                        </div>
                        <div class="form-group">
                            <label for="ldlCholesterol">Холестерин ЛПНП (ммоль/л)</label>
                            <input type="number" step="0.1" id="ldlCholesterol" placeholder="Например: 3.3">
                        </div>
                        <div class="form-group">
                            <label for="hdlCholesterol">Холестерин ЛПВП (ммоль/л)</label>
                            <input type="number" step="0.1" id="hdlCholesterol" placeholder="Например: 1.2">
                        </div>
                        <div class="form-group">
                            <label for="patientRisk">Группа риска пациента</label>
                            <select id="patientRisk">
                                <option value="low">Низкий риск</option>
                                <option value="medium">Умеренный риск</option>
                                <option value="high">Высокий риск</option>
                                <option value="veryHigh">Очень высокий риск</option>
                            </select>
                        </div>
                        <button class="btn" onclick="calculateLipidProfile()">🩸 Оценить профиль</button>
                        <div id="lipidResult" class="result-box"></div>
                    </div>
                </div>
            </div>

            <!-- Критерии метаболического синдрома -->
            <div class="info-section">
                <h3>📊 Критерии метаболического синдрома</h3>
                <table>
                    <tr>
                        <th>Критерий</th>
                        <th>Пороговое значение</th>
                        <th>Клиническое значение</th>
                    </tr>
                    <tr>
                        <td><strong>Абдоминальное ожирение</strong></td>
                        <td>ОТ > 94 см (муж), > 80 см (жен)</td>
                        <td>Основной критерий метаболического синдрома</td>
                    </tr>
                    <tr>
                        <td><strong>Артериальное давление</strong></td>
                        <td>≥ 130/85 мм рт.ст.</td>
                        <td>или прием антигипертензивных препаратов</td>
                    </tr>
                    <tr>
                        <td><strong>Глюкоза натощак</strong></td>
                        <td>≥ 6.1 ммоль/л</td>
                        <td>или ранее диагностированный диабет 2 типа</td>
                    </tr>
                    <tr>
                        <td><strong>Триглицериды</strong></td>
                        <td>≥ 1.7 ммоль/л</td>
                        <td>или прием гиполипидемических препаратов</td>
                    </tr>
                    <tr>
                        <td><strong>Холестерин ЛПВП</strong></td>
                        <td>&lt; 1.0 ммоль/л (муж), &lt; 1.2 ммоль/л (жен)</td>
                        <td>Снижение "хорошего" холестерина</td>
                    </tr>
                </table>
                <p style="margin-top: 15px; font-style: italic; color: var(--text-light);">
                    💡 Диагноз метаболического синдрома устанавливается при наличии 3 из 5 критериев
                </p>
            </div>

            <!-- Целевые значения липидов -->
            <div class="info-section">
                <h3>🎯 Целевые значения липидов по группам риска</h3>
                <table>
                    <tr>
                        <th>Группа сердечно-сосудистого риска</th>
                        <th>Холестерин ЛПНП</th>
                        <th>НедиЛПНП</th>
                        <th>АпоВ</th>
                    </tr>
                    <tr>
                        <td><strong>Очень высокий риск</strong></td>
                        <td>&lt; 1.4 ммоль/л</td>
                        <td>&lt; 2.0 ммоль/л</td>
                        <td>&lt; 0.65 г/л</td>
                    </tr>
                    <tr>
                        <td><strong>Высокий риск</strong></td>
                        <td>&lt; 1.8 ммоль/л</td>
                        <td>&lt; 2.6 ммоль/л</td>
                        <td>&lt; 0.80 г/л</td>
                    </tr>
                    <tr>
                        <td><strong>Умеренный риск</strong></td>
                        <td>&lt; 2.6 ммоль/л</td>
                        <td>&lt; 3.4 ммоль/л</td>
                        <td>&lt; 1.0 г/л</td>
                    </tr>
                    <tr>
                        <td><strong>Низкий риск</strong></td>
                        <td>&lt; 3.0 ммоль/л</td>
                        <td>&lt; 3.8 ммоль/л</td>
                        <td>&lt; 1.2 г/л</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <script>
        function calculateBMI() {
            const height = parseFloat(document.getElementById('height').value);
            const weight = parseFloat(document.getElementById('bmiWeight').value);
            
            if (!height || !weight) {
                alert('Введите рост и вес');
                return;
            }
            
            const heightM = height / 100;
            const bmi = (weight / (heightM * heightM)).toFixed(1);
            
            let category, color, risk, recommendations = [];
            
            if (bmi < 18.5) {
                category = "Дефицит массы тела";
                color = "#dbeafe";
                risk = "risk-low";
                recommendations.push("Повысить калорийность питания");
                recommendations.push("Консультация диетолога");
                recommendations.push("Исключить патологию ЖКТ");
            } else if (bmi < 25) {
                category = "Нормальная масса тела";
                color = "#dcfce7";
                risk = "risk-low";
                recommendations.push("Поддерживать текущий вес");
                recommendations.push("Сбалансированное питание");
                recommendations.push("Регулярная физическая активность");
            } else if (bmi < 30) {
                category = "Избыточная масса тела";
                color = "#fef3c7";
                risk = "risk-medium";
                recommendations.push("Снизить вес на 5-10% от текущего");
                recommendations.push("Увеличить физическую активность");
                recommendations.push("Ограничить простые углеводы");
            } else if (bmi < 35) {
                category = "Ожирение I степени";
                color = "#fed7aa";
                risk = "risk-high";
                recommendations.push("Снизить вес на 10-15% от текущего");
                recommendations.push("Консультация эндокринолога");
                recommendations.push("Медикаментозная терапия при необходимости");
            } else if (bmi < 40) {
                category = "Ожирение II степени";
                color = "#fecaca";
                risk = "risk-high";
                recommendations.push("Снизить вес на 15-20% от текущего");
                recommendations.push("Обследование на коморбидные состояния");
                recommendations.push("Рассмотреть медикаментозную терапию");
            } else {
                category = "Ожирение III степени";
                color = "#fca5a5";
                risk = "risk-high";
                recommendations.push("Снизить вес на 20-25% от текущего");
                recommendations.push("Консультация бариатрического хирурга");
                recommendations.push("Комплексная мультидисциплинарная терапия");
            }
            
            let resultHTML = `
                <div class="calculator-value">${bmi}</div>
                <div style="text-align: center; color: var(--text-light); margin-bottom: 20px;">
                    Индекс массы тела
                </div>
                
                <div style="background: ${color}; padding: 15px; border-radius: 8px; margin: 15px 0;">
                    <h4 style="display: flex; align-items: center; justify-content: space-between;">
                        ${category}
                        <span class="risk-indicator ${risk}">${risk === 'risk-low' ? 'Низкий риск' : risk === 'risk-medium' ? 'Умеренный риск' : 'Высокий риск'}</span>
                    </h4>
                    <div style="display: grid; gap: 8px;">
                        <div style="display: flex; justify-content: space-between;">
                            <span>Рост:</span>
                            <strong>${height} см</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>Вес:</span>
                            <strong>${weight} кг</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>Формула:</span>
                            <strong>${weight} ÷ (${heightM} × ${heightM})</strong>
                        </div>
                    </div>
                </div>
                
                <div style="background: #f8fafc; padding: 15px; border-radius: 8px;">
                    <h4>📊 Классификация ИМТ (ВОЗ):</h4>
                    <ul>
                        <li>Менее 18.5 - Дефицит массы тела</li>
                        <li>18.5 - 24.9 - Нормальная масса тела</li>
                        <li>25.0 - 29.9 - Избыточная масса тела</li>
                        <li>30.0 - 34.9 - Ожирение I степени</li>
                        <li>35.0 - 39.9 - Ожирение II степени</li>
                        <li>40.0 и более - Ожирение III степени</li>
                    </ul>
                </div>
                
                <div style="background: #fef3c7; padding: 15px; border-radius: 8px; margin-top: 15px;">
                    <h4>💡 Рекомендации:</h4>
                    <ul>
                        ${recommendations.map(rec => `<li>${rec}</li>`).join('')}
                    </ul>
                </div>
            `;
            
            document.getElementById('bmiResult').innerHTML = resultHTML;
            document.getElementById('bmiResult').style.display = 'block';
        }

        function calculateBMR() {
            const weight = parseFloat(document.getElementById('bmrWeight').value);
            const height = parseFloat(document.getElementById('bmrHeight').value);
            const age = parseInt(document.getElementById('bmrAge').value);
            const gender = document.getElementById('bmrGender').value;
            
            if (!weight || !height || !age) {
                alert('Заполните все поля');
                return;
            }
            
            let bmr;
            if (gender === 'male') {
                bmr = 10 * weight + 6.25 * height - 5 * age + 5;
            } else {
                bmr = 10 * weight + 6.25 * height - 5 * age - 161;
            }
            
            const maintenance = bmr * 1.2;
            const weightLoss = bmr * 0.8;
            const weightGain = bmr * 1.4;
            
            let resultHTML = `
                <div class="calculator-value">${Math.round(bmr)} ккал</div>
                <div style="text-align: center; color: var(--text-light); margin-bottom: 20px;">
                    Основной обмен веществ
                </div>
                
                <div style="background: #f0f9ff; padding: 15px; border-radius: 8px; margin: 15px 0;">
                    <h4>📊 Энергетические потребности:</h4>
                    <div style="display: grid; gap: 10px;">
                        <div style="display: flex; justify-content: space-between;">
                            <span>Поддержание веса:</span>
                            <strong>${Math.round(maintenance)} ккал/сут</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>Снижение веса:</span>
                            <strong>${Math.round(weightLoss)} ккал/сут</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>Набор веса:</span>
                            <strong>${Math.round(weightGain)} ккал/сут</strong>
                        </div>
                    </div>
                </div>
                
                <div style="background: #f0fdf4; padding: 15px; border-radius: 8px;">
                    <h4>💡 Рекомендации по питанию:</h4>
                    <ul>
                        <li>Основной обмен - минимальная энергия для поддержания жизнедеятельности</li>
                        <li>Для снижения веса создайте дефицит 500 ккал/сут</li>
                        <li>Распределение БЖУ: 30% белки, 30% жиры, 40% углеводы</li>
                        <li>Пейте 30-35 мл воды на 1 кг идеальной массы тела</li>
                    </ul>
                </div>
            `;
            
            document.getElementById('bmrResult').innerHTML = resultHTML;
            document.getElementById('bmrResult').style.display = 'block';
        }

        function calculateMetabolicRisk() {
            const waist = parseFloat(document.getElementById('waist').value);
            const gender = document.getElementById('gender').value;
            const glucose = parseFloat(document.getElementById('fastingGlucose').value);
            const triglycerides = parseFloat(document.getElementById('triglycerides').value);
            
            if (!waist || !glucose || !triglycerides) {
                alert('Заполните все поля');
                return;
            }
            
            let criteria = 0;
            let riskDetails = [];
            
            // Критерий 1: Абдоминальное ожирение
            const waistThreshold = gender === 'male' ? 94 : 80;
            if (waist > waistThreshold) {
                criteria++;
                riskDetails.push("✅ Абдоминальное ожирение");
            } else {
                riskDetails.push("❌ Абдоминальное ожирение отсутствует");
            }
            
            // Критерий 2: Глюкоза натощак
            if (glucose >= 6.1) {
                criteria++;
                riskDetails.push("✅ Повышена глюкоза натощак");
            } else {
                riskDetails.push("❌ Глюкоза натощак в норме");
            }
            
            // Критерий 3: Триглицериды
            if (triglycerides >= 1.7) {
                criteria++;
                riskDetails.push("✅ Повышены триглицериды");
            } else {
                riskDetails.push("❌ Триглицериды в норме");
            }
            
            let riskLevel, riskColor, recommendations = [];
            
            if (criteria >= 3) {
                riskLevel = "Высокий риск метаболического синдрома";
                riskColor = "#fecaca";
                recommendations.push("Консультация эндокринолога");
                recommendations.push("Коррекция диеты и физической активности");
                recommendations.push("Мониторинг артериального давления");
                recommendations.push("Контроль липидного профиля");
            } else if (criteria >= 2) {
                riskLevel = "Умеренный риск";
                riskColor = "#fef3c7";
                recommendations.push("Коррекция образа жизни");
                recommendations.push("Контроль веса и окружности талии");
                recommendations.push("Профилактические мероприятия");
            } else {
                riskLevel = "Низкий риск";
                riskColor = "#dcfce7";
                recommendations.push("Поддерживать здоровый образ жизни");
                recommendations.push("Регулярные профилактические осмотры");
            }
            
            let resultHTML = `
                <div style="text-align: center; margin-bottom: 20px;">
                    <div style="font-size: 2em; font-weight: 800; color: ${criteria >= 3 ? '#dc2626' : criteria >= 2 ? '#d97706' : '#059669'};">
                        ${criteria} из 5 критериев
                    </div>
                    <div style="color: var(--text-light);">критериев метаболического синдрома</div>
                </div>
                
                <div style="background: ${riskColor}; padding: 15px; border-radius: 8px; margin: 15px 0;">
                    <h4>${riskLevel}</h4>
                    <div style="display: grid; gap: 8px; margin-top: 10px;">
                        ${riskDetails.map(detail => `<div>${detail}</div>`).join('')}
                    </div>
                </div>
                
                <div style="background: #f8fafc; padding: 15px; border-radius: 8px;">
                    <h4>📋 Отсутствующие критерии для полной оценки:</h4>
                    <ul>
                        <li>Артериальное давление (≥ 130/85 мм рт.ст.)</li>
                        <li>Холестерин ЛПВП (< 1.0 ммоль/л муж, < 1.2 ммоль/л жен)</li>
                    </ul>
                </div>
                
                <div style="background: #fef3c7; padding: 15px; border-radius: 8px; margin-top: 15px;">
                    <h4>💡 Рекомендации:</h4>
                    <ul>
                        ${recommendations.map(rec => `<li>${rec}</li>`).join('')}
                    </ul>
                </div>
            `;
            
            document.getElementById('metabolicResult').innerHTML = resultHTML;
            document.getElementById('metabolicResult').style.display = 'block';
        }

        function calculateLipidProfile() {
            const totalChol = parseFloat(document.getElementById('totalCholesterol').value);
            const ldl = parseFloat(document.getElementById('ldlCholesterol').value);
            const hdl = parseFloat(document.getElementById('hdlCholesterol').value);
            const riskGroup = document.getElementById('patientRisk').value;
            
            if (!totalChol || !ldl || !hdl) {
                alert('Заполните все поля липидного профиля');
                return;
            }
            
            const nonHDL = totalChol - hdl;
            
            let ldlTarget, nonHDLTarget, recommendations = [];
            let ldlStatus, hdlStatus, overallStatus;
            
            // Определение целевых значений по группе риска
            switch(riskGroup) {
                case 'veryHigh':
                    ldlTarget = 1.4;
                    nonHDLTarget = 2.0;
                    recommendations.push("Интенсивная гиполипидемическая терапия");
                    recommendations.push("Статины в высоких дозах");
                    recommendations.push("Рассмотреть комбинацию с эзетимибом");
                    break;
                case 'high':
                    ldlTarget = 1.8;
                    nonHDLTarget = 2.6;
                    recommendations.push("Гиполипидемическая терапия");
                    recommendations.push("Статины в средних дозах");
                    break;
                case 'medium':
                    ldlTarget = 2.6;
                    nonHDLTarget = 3.4;
                    recommendations.push("Коррекция образа жизни");
                    recommendations.push("Рассмотреть статины при неэффективности");
                    break;
                case 'low':
                    ldlTarget = 3.0;
                    nonHDLTarget = 3.8;
                    recommendations.push("Коррекция питания и физическая активность");
                    recommendations.push("Контроль через 3-6 месяцев");
                    break;
            }
            
            // Оценка показателей
            if (ldl <= ldlTarget) {
                ldlStatus = "✅ В пределах целевых значений";
            } else {
                ldlStatus = "❌ Выше целевых значений";
            }
            
            if (hdl >= (riskGroup === 'male' ? 1.0 : 1.2)) {
                hdlStatus = "✅ В пределах нормы";
            } else {
                hdlStatus = "❌ Ниже нормы";
            }
            
            if (ldl <= ldlTarget && hdl >= (riskGroup === 'male' ? 1.0 : 1.2)) {
                overallStatus = "Оптимальный липидный профиль";
            } else {
                overallStatus = "Требуется коррекция";
            }
            
            let resultHTML = `
                <div style="text-align: center; margin-bottom: 20px;">
                    <div style="font-size: 1.5em; font-weight: 800; color: var(--primary);">
                        ${overallStatus}
                    </div>
                    <div style="color: var(--text-light);">Оценка липидного профиля</div>
                </div>
                
                <div style="background: #f0f9ff; padding: 15px; border-radius: 8px; margin: 15px 0;">
                    <h4>📊 Результаты анализа:</h4>
                    <div style="display: grid; gap: 10px;">
                        <div style="display: flex; justify-content: space-between;">
                            <span>Холестерин ЛПНП:</span>
                            <strong>${ldl} ммоль/л ${ldl <= ldlTarget ? '✅' : '❌'}</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>Целевое значение ЛПНП:</span>
                            <strong>&lt; ${ldlTarget} ммоль/л</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>Холестерин ЛПВП:</span>
                            <strong>${hdl} ммоль/л ${hdl >= (riskGroup === 'male' ? 1.0 : 1.2) ? '✅' : '❌'}</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>НедиЛПНП:</span>
                            <strong>${nonHDL.toFixed(1)} ммоль/л</strong>
                        </div>
                    </div>
                </div>
                
                <div style="background: #f0fdf4; padding: 15px; border-radius: 8px;">
                    <h4>💡 Рекомендации по коррекции:</h4>
                    <ul>
                        ${recommendations.map(rec => `<li>${rec}</li>`).join('')}
                        ${ldl > ldlTarget ? '<li>Ограничить насыщенные жиры и трансжиры</li>' : ''}
                        ${hdl < (riskGroup === 'male' ? 1.0 : 1.2) ? '<li>Увеличить потребление омега-3 жирных кислот</li>' : ''}
                        <li>Регулярная аэробная физическая активность</li>
                    </ul>
                </div>
            `;
            
            document.getElementById('lipidResult').innerHTML = resultHTML;
            document.getElementById('lipidResult').style.display = 'block';
        }

        document.addEventListener('DOMContentLoaded', function() {
            console.log('Страница метаболических нарушений загружена');
        });
    </script>
</body>
</html>
