<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Сахарный диабет - Эндокринолог PRO</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #dc2626;
            --primary-dark: #b91c1c;
            --secondary: #ea580c;
            --accent: #e11d48;
            --success: #059669;
            --warning: #d97706;
            --danger: #dc2626;
            --light: #fef2f2;
            --dark: #1e293b;
            --text: #374151;
            --text-light: #6b7280;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #fda4af 0%, #f97316 100%);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
            color: var(--text);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
        }

        .header h1 {
            font-size: 2.8em;
            margin-bottom: 15px;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            position: relative;
        }

        .header p {
            font-size: 1.3em;
            opacity: 0.95;
            font-weight: 300;
            position: relative;
        }

        .main-menu {
            display: flex;
            justify-content: center;
            background: var(--dark);
            padding: 20px;
            gap: 8px;
            flex-wrap: wrap;
            backdrop-filter: blur(10px);
        }

        .main-menu a {
            padding: 12px 24px;
            text-decoration: none;
            color: white;
            font-weight: 600;
            border-radius: 50px;
            transition: all 0.3s ease;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            font-size: 0.95em;
        }

        .main-menu a:hover {
            background: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(220, 38, 38, 0.4);
        }

        .main-menu a.active {
            background: var(--primary);
            box-shadow: 0 5px 15px rgba(220, 38, 38, 0.4);
        }

        .content {
            padding: 50px;
        }

        .page-title {
            font-size: 2.2em;
            color: var(--dark);
            margin-bottom: 10px;
            font-weight: 700;
        }

        .page-subtitle {
            font-size: 1.2em;
            color: var(--text-light);
            margin-bottom: 40px;
        }

        .disease-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .disease-card {
            background: linear-gradient(135deg, #ffffff 0%, #fef2f2 100%);
            border-radius: 16px;
            padding: 30px;
            border: 1px solid #fecaca;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            position: relative;
            overflow: hidden;
        }

        .disease-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
        }

        .disease-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 25px 50px -12px rgba(220, 38, 38, 0.25);
            border-color: var(--primary);
        }

        .disease-card h3 {
            color: var(--dark);
            margin-bottom: 20px;
            font-size: 1.5em;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .disease-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            color: white;
        }

        .disease-card ul {
            margin: 20px 0;
            padding-left: 20px;
        }

        .disease-card li {
            margin-bottom: 10px;
            color: var(--text);
            position: relative;
            padding-left: 10px;
        }

        .disease-card li::before {
            content: '•';
            color: var(--primary);
            font-weight: bold;
            position: absolute;
            left: -15px;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 14px 28px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            text-decoration: none;
            border-radius: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            margin-top: 15px;
            font-size: 0.95em;
            box-shadow: 0 4px 15px rgba(220, 38, 38, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(220, 38, 38, 0.4);
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
        }

        .calculator-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
            margin: 40px 0;
        }

        .calculator-card {
            background: linear-gradient(135deg, #ffffff 0%, #fef2f2 100%);
            border-radius: 16px;
            padding: 30px;
            border: 1px solid #fecaca;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .calculator-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(220, 38, 38, 0.15);
        }

        .calculator-card h3 {
            color: var(--dark);
            margin-bottom: 20px;
            font-size: 1.3em;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            border: 1px solid #fecaca;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .form-group:focus-within {
            border-color: var(--primary);
            box-shadow: 0 4px 15px rgba(220, 38, 38, 0.15);
        }

        .form-group label {
            display: block;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 10px;
            font-size: 1em;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #fecaca;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: #fef2f2;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            background: white;
            box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
        }

        .result-box {
            background: linear-gradient(135deg, #ffffff 0%, #f0fdf4 100%);
            padding: 25px;
            border-radius: 12px;
            margin-top: 20px;
            border: 1px solid #bbf7d0;
            display: none;
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .info-section {
            background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);
            padding: 35px;
            border-radius: 16px;
            margin: 35px 0;
            border: 1px solid #fecaca;
        }

        .info-section h3 {
            color: var(--dark);
            margin-bottom: 20px;
            font-size: 1.4em;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        th, td {
            border: 1px solid #fecaca;
            padding: 16px;
            text-align: left;
        }

        th {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            font-weight: 600;
            font-size: 0.95em;
        }

        tr:nth-child(even) {
            background: #fef2f2;
        }

        tr:hover {
            background: #fecaca;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .feature-item {
            text-align: center;
            padding: 25px;
            background: white;
            border-radius: 12px;
            border: 1px solid #fecaca;
            transition: all 0.3s ease;
        }

        .feature-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(220, 38, 38, 0.1);
        }

        .feature-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .calculator-value {
            font-size: 2.5em;
            font-weight: 800;
            color: var(--primary);
            text-align: center;
            margin: 15px 0;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        @media (max-width: 768px) {
            .content {
                padding: 30px 20px;
            }
            
            .disease-grid, .calculator-grid {
                grid-template-columns: 1fr;
            }
            
            .main-menu {
                flex-direction: column;
                align-items: center;
            }
            
            .main-menu a {
                width: 100%;
                text-align: center;
            }
            
            .header h1 {
                font-size: 2.2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>💉 САХАРНЫЙ ДИАБЕТ</h1>
            <p>Комплексное управление диабетом с персонализированным подходом к лечению</p>
        </div>

        <nav class="main-menu">
            <a href="../../index.html">🏠 Главная</a>
            <a href="../thyroid/index.html">🦋 Щитовидная железа</a>
            <a href="index.html" class="active">💉 Сахарный диабет</a>
            <a href="../metabolic/index.html">⚖️ Обмен веществ</a>
            <a href="../adrenal/index.html">🧠 Надпочечники</a>
        </nav>

        <div class="content">
            <h1 class="page-title">Сахарный диабет</h1>
            <p class="page-subtitle">Современная диагностика, лечение и мониторинг всех типов диабета</p>

            <!-- Быстрый доступ -->
            <div class="feature-grid">
                <div class="feature-item">
                    <div class="feature-icon">📊</div>
                    <h3>Диагностика</h3>
                    <p>Определение типа диабета и стадии</p>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">💊</div>
                    <h3>Инсулинотерапия</h3>
                    <p>Расчет доз и коррекция лечения</p>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">🍽️</div>
                    <h3>Диетотерапия</h3>
                    <p>Подбор питания и ХЕ</p>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">📈</div>
                    <h3>Мониторинг</h3>
                    <p>Контроль гликемии и HbA1c</p>
                </div>
            </div>

            <div class="disease-grid">
                <div class="disease-card">
                    <h3><div class="disease-icon">🔬</div> Диабет 1 типа</h3>
                    <p>Аутоиммунное заболевание с абсолютным дефицитом инсулина:</p>
                    <ul>
                        <li>Антитела к GAD, IA-2, инсулину</li>
                        <li>Абсолютный дефицит инсулина</li>
                        <li>Инсулинотерапия с момента диагностики</li>
                        <li>Риск кетоацидоза</li>
                    </ul>
                    <a href="type1.html" class="btn">📖 Подробнее</a>
                </div>

                <div class="disease-card">
                    <h3><div class="disease-icon">⚖️</div> Диабет 2 типа</h3>
                    <p>Инсулинорезистентность и относительный дефицит инсулина:</p>
                    <ul>
                        <li>Метформин как препарат первой линии</li>
                        <li>iSGLT2, аГПП-1, производные сульфонилмочевины</li>
                        <li>Инсулинотерапия на поздних стадиях</li>
                        <li>Коррекция факторов риска</li>
                    </ul>
                    <a href="type2.html" class="btn">📖 Подробнее</a>
                </div>

                <div class="disease-card">
                    <h3><div class="disease-icon">🤰</div> Гестационный диабет</h3>
                    <p>Диабет беременных с особыми подходами к лечению:</p>
                    <ul>
                        <li>Скрининг на 24-28 неделе беременности</li>
                        <li>Диетотерапия как основа лечения</li>
                        <li>Инсулин при неэффективности диеты</li>
                        <li>Контроль после родов</li>
                    </ul>
                    <a href="gestational.html" class="btn">📖 Подробнее</a>
                </div>
            </div>

            <!-- Калькуляторы для диабета -->
            <div class="info-section">
                <h3>🧮 Калькуляторы для управления диабетом</h3>
                <p class="section-subtitle">Инструменты для точного расчета терапии и мониторинга</p>
                
                <div class="calculator-grid">
                    <!-- Калькулятор ХЕ -->
                    <div class="calculator-card">
                        <h3>🍞 Калькулятор хлебных единиц</h3>
                        <div class="form-group">
                            <label for="carbAmount">Углеводы в продукте (граммы)</label>
                            <input type="number" id="carbAmount" placeholder="Например: 30">
                        </div>
                        <button class="btn" onclick="calculateXE()">📊 Рассчитать ХЕ</button>
                        <div id="xeResult" class="result-box"></div>
                    </div>

                    <!-- Калькулятор болюсного инсулина -->
                    <div class="calculator-card">
                        <h3>💉 Коррекционный болюс</h3>
                        <div class="form-group">
                            <label for="currentGlucose">Текущая гликемия (ммоль/л)</label>
                            <input type="number" step="0.1" id="currentGlucose" placeholder="Например: 12.5">
                        </div>
                        <div class="form-group">
                            <label for="targetGlucose">Целевая гликемия (ммоль/л)</label>
                            <input type="number" step="0.1" id="targetGlucose" placeholder="Например: 6.0" value="6.0">
                        </div>
                        <div class="form-group">
                            <label for="isf">Фактор чувствительности</label>
                            <input type="number" step="0.1" id="isf" placeholder="ммоль/л на 1 ЕД" value="2.5">
                        </div>
                        <button class="btn" onclick="calculateBolus()">🧮 Рассчитать болюс</button>
                        <div id="bolusResult" class="result-box"></div>
                    </div>

                    <!-- Калькулятор базального инсулина -->
                    <div class="calculator-card">
                        <h3>📊 Базальная доза инсулина</h3>
                        <div class="form-group">
                            <label for="weight">Вес пациента (кг)</label>
                            <input type="number" id="weight" placeholder="Например: 70">
                        </div>
                        <div class="form-group">
                            <label for="diabetesType">Тип диабета</label>
                            <select id="diabetesType">
                                <option value="type1">Диабет 1 типа</option>
                                <option value="type2">Диабет 2 типа</option>
                            </select>
                        </div>
                        <button class="btn" onclick="calculateBasal()">📈 Рассчитать базал</button>
                        <div id="basalResult" class="result-box"></div>
                    </div>

                    <!-- Калькулятор ИМТ -->
                    <div class="calculator-card">
                        <h3>⚖️ Индекс массы тела</h3>
                        <div class="form-group">
                            <label for="height">Рост (см)</label>
                            <input type="number" id="height" placeholder="Например: 175">
                        </div>
                        <div class="form-group">
                            <label for="bmiWeight">Вес (кг)</label>
                            <input type="number" id="bmiWeight" placeholder="Например: 70">
                        </div>
                        <button class="btn" onclick="calculateBMI()">📊 Рассчитать ИМТ</button>
                        <div id="bmiResult" class="result-box"></div>
                    </div>
                </div>
            </div>

            <!-- Диагностические критерии -->
            <div class="info-section">
                <h3>📊 Диагностические критерии сахарного диабета</h3>
                <table>
                    <tr>
                        <th>Показатель</th>
                        <th>Норма</th>
                        <th>Предиабет</th>
                        <th>Сахарный диабет</th>
                    </tr>
                    <tr>
                        <td><strong>Глюкоза натощак</strong></td>
                        <td>&lt; 6.1 ммоль/л</td>
                        <td>6.1 - 6.9 ммоль/л</td>
                        <td>≥ 7.0 ммоль/л</td>
                    </tr>
                    <tr>
                        <td><strong>Глюкоза через 2 ч ПГТТ</strong></td>
                        <td>&lt; 7.8 ммоль/л</td>
                        <td>7.8 - 11.0 ммоль/л</td>
                        <td>≥ 11.1 ммоль/л</td>
                    </tr>
                    <tr>
                        <td><strong>Гликированный гемоглобин (HbA1c)</strong></td>
                        <td>&lt; 6.0%</td>
                        <td>6.0 - 6.4%</td>
                        <td>≥ 6.5%</td>
                    </tr>
                    <tr>
                        <td><strong>Случайная гликемия</strong></td>
                        <td>&lt; 11.1 ммоль/л</td>
                        <td>-</td>
                        <td>≥ 11.1 ммоль/л + симптомы</td>
                    </tr>
                </table>
            </div>

            <!-- Целевые значения -->
            <div class="info-section">
                <h3>🎯 Целевые значения гликемии</h3>
                <table>
                    <tr>
                        <th>Время измерения</th>
                        <th>Диабет 1 типа</th>
                        <th>Диабет 2 типа</th>
                        <th>Гестационный диабет</th>
                    </tr>
                    <tr>
                        <td><strong>Натощак</strong></td>
                        <td>5.0 - 7.2 ммоль/л</td>
                        <td>4.5 - 6.5 ммоль/л</td>
                        <td>3.3 - 5.3 ммоль/л</td>
                    </tr>
                    <tr>
                        <td><strong>Через 2 ч после еды</strong></td>
                        <td>5.0 - 10.0 ммоль/л</td>
                        <td>6.0 - 8.0 ммоль/л</td>
                        <td>6.0 - 7.0 ммоль/л</td>
                    </tr>
                    <tr>
                        <td><strong>Перед сном</strong></td>
                        <td>6.0 - 8.0 ммоль/л</td>
                        <td>6.0 - 8.0 ммоль/л</td>
                        <td>5.0 - 6.0 ммоль/л</td>
                    </tr>
                    <tr>
                        <td><strong>HbA1c</strong></td>
                        <td>&lt; 7.0%</td>
                        <td>&lt; 6.5%</td>
                        <td>&lt; 6.0%</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <script>
        function calculateXE() {
            const carbs = parseFloat(document.getElementById('carbAmount').value);
            
            if (!carbs) {
                alert('Введите количество углеводов');
                return;
            }
            
            const xe = (carbs / 12).toFixed(1);
            
            let resultHTML = `
                <div class="calculator-value">${xe} ХЕ</div>
                <div style="text-align: center; color: var(--text-light); margin-bottom: 20px;">
                    Хлебных единиц в продукте
                </div>
                
                <div style="background: #f0f9ff; padding: 15px; border-radius: 8px; margin: 15px 0;">
                    <h4>📋 Детали расчета:</h4>
                    <div style="display: grid; gap: 8px;">
                        <div style="display: flex; justify-content: space-between;">
                            <span>Углеводы:</span>
                            <strong>${carbs} г</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>Формула:</span>
                            <strong>${carbs} ÷ 12</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>Результат:</span>
                            <strong>${xe} ХЕ</strong>
                        </div>
                    </div>
                </div>
                
                <div style="background: #f0fdf4; padding: 15px; border-radius: 8px;">
                    <h4>💡 Практические рекомендации:</h4>
                    <ul>
                        <li>1 ХЕ = 12 г углеводов</li>
                        <li>На 1 ХЕ обычно требуется 1-2 ЕД инсулина</li>
                        <li>Учитывайте индивидуальную чувствительность к инсулину</li>
                        <li>Корректируйте дозу в зависимости от физической активности</li>
                    </ul>
                </div>
            `;
            
            document.getElementById('xeResult').innerHTML = resultHTML;
            document.getElementById('xeResult').style.display = 'block';
        }

        function calculateBolus() {
            const current = parseFloat(document.getElementById('currentGlucose').value);
            const target = parseFloat(document.getElementById('targetGlucose').value);
            const isf = parseFloat(document.getElementById('isf').value);
            
            if (!current || !target || !isf) {
                alert('Заполните все поля');
                return;
            }
            
            const correction = (current - target) / isf;
            const bolus = Math.max(0, correction).toFixed(1);
            
            let status, statusColor, recommendations = [];
            
            if (current > 15) {
                status = "⚠️ Высокий уровень гликемии";
                statusColor = "#fef2f2";
                recommendations.push("Проверить кетоны в моче");
                recommendations.push("Увеличить потребление воды");
                recommendations.push("Проконсультироваться с врачом");
            } else if (current > 10) {
                status = "🟡 Повышенный уровень";
                statusColor = "#fffbeb";
                recommendations.push("Корректировать дозу инсулина");
            } else {
                status = "✅ Уровень в пределах";
                statusColor = "#f0fdf4";
            }
            
            let resultHTML = `
                <div class="calculator-value">${bolus} ЕД</div>
                <div style="text-align: center; color: var(--text-light); margin-bottom: 20px;">
                    Коррекционная доза инсулина
                </div>
                
                <div style="background: ${statusColor}; padding: 15px; border-radius: 8px; margin: 15px 0;">
                    <h4>${status}</h4>
                    <div style="display: grid; gap: 8px;">
                        <div style="display: flex; justify-content: space-between;">
                            <span>Текущий уровень:</span>
                            <strong>${current} ммоль/л</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>Целевой уровень:</span>
                            <strong>${target} ммоль/л</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>Фактор чувствительности:</span>
                            <strong>${isf} ммоль/л на 1 ЕД</strong>
                        </div>
                    </div>
                </div>
                
                ${recommendations.length > 0 ? `
                <div style="background: #fef3c7; padding: 15px; border-radius: 8px;">
                    <h4>📋 Рекомендации:</h4>
                    <ul>
                        ${recommendations.map(rec => `<li>${rec}</li>`).join('')}
                    </ul>
                </div>
                ` : ''}
            `;
            
            document.getElementById('bolusResult').innerHTML = resultHTML;
            document.getElementById('bolusResult').style.display = 'block';
        }

        function calculateBasal() {
            const weight = parseFloat(document.getElementById('weight').value);
            const type = document.getElementById('diabetesType').value;
            
            if (!weight) {
                alert('Введите вес пациента');
                return;
            }
            
            let basalDose, totalDose;
            let recommendations = [];
            
            if (type === 'type1') {
                basalDose = weight * 0.3;
                totalDose = weight * 0.6;
                recommendations.push("Базальный инсулин составляет 30-50% от общей суточной дозы");
                recommendations.push("Корректировать по уровню глюкозы натощак");
                recommendations.push("Разделить дозу на 2 введения (утро/вечер) при использовании НПХ-инсулина");
            } else {
                basalDose = weight * 0.2;
                totalDose = weight * 0.4;
                recommendations.push("При диабете 2 типа начать с 10 ЕД/сут");
                recommendations.push("Увеличивать на 2 ЕД каждые 3 дня до целевых значений");
                recommendations.push("Комбинировать с пероральными сахароснижающими препаратами");
            }
            
            const roundedBasal = Math.round(basalDose);
            const roundedTotal = Math.round(totalDose);
            
            let resultHTML = `
                <div class="calculator-value">${roundedBasal} ЕД</div>
                <div style="text-align: center; color: var(--text-light); margin-bottom: 20px;">
                    Суточная базальная доза
                </div>
                
                <div style="background: #f0f9ff; padding: 15px; border-radius: 8px; margin: 15px 0;">
                    <h4>📊 Детали расчета:</h4>
                    <div style="display: grid; gap: 8px;">
                        <div style="display: flex; justify-content: space-between;">
                            <span>Вес пациента:</span>
                            <strong>${weight} кг</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>Тип диабета:</span>
                            <strong>${type === 'type1' ? '1 тип' : '2 тип'}</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>Формула базала:</span>
                            <strong>${weight} × ${type === 'type1' ? '0.3' : '0.2'}</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>Общая суточная доза:</span>
                            <strong>${roundedTotal} ЕД/сут</strong>
                        </div>
                    </div>
                </div>
                
                <div style="background: #f0fdf4; padding: 15px; border-radius: 8px;">
                    <h4>💡 Рекомендации по терапии:</h4>
                    <ul>
                        ${recommendations.map(rec => `<li>${rec}</li>`).join('')}
                        <li>Контроль глюкозы натощак для коррекции дозы</li>
                        <li>При гипогликемиях снизить дозу на 10-20%</li>
                    </ul>
                </div>
            `;
            
            document.getElementById('basalResult').innerHTML = resultHTML;
            document.getElementById('basalResult').style.display = 'block';
        }

        function calculateBMI() {
            const height = parseFloat(document.getElementById('height').value);
            const weight = parseFloat(document.getElementById('bmiWeight').value);
            
            if (!height || !weight) {
                alert('Введите рост и вес');
                return;
            }
            
            const heightM = height / 100;
            const bmi = (weight / (heightM * heightM)).toFixed(1);
            
            let category, color, recommendations = [];
            
            if (bmi < 18.5) {
                category = "Дефицит массы тела";
                color = "#dbeafe";
                recommendations.push("Повысить калорийность питания");
                recommendations.push("Консультация диетолога");
            } else if (bmi < 25) {
                category = "Нормальная масса тела";
                color = "#dcfce7";
                recommendations.push("Поддерживать текущий вес");
                recommendations.push("Регулярная физическая активность");
            } else if (bmi < 30) {
                category = "Избыточная масса тела";
                color = "#fef3c7";
                recommendations.push("Снизить вес на 5-10% от текущего");
                recommendations.push("Увеличить физическую активность");
            } else if (bmi < 35) {
                category = "Ожирение I степени";
                color = "#fed7aa";
                recommendations.push("Снизить вес на 10-15% от текущего");
                recommendations.push("Консультация эндокринолога");
            } else if (bmi < 40) {
                category = "Ожирение II степени";
                color = "#fecaca";
                recommendations.push("Снизить вес на 15-20% от текущего");
                recommendations.push("Медикаментозная терапия ожирения");
            } else {
                category = "Ожирение III степени";
                color = "#fca5a5";
                recommendations.push("Снизить вес на 20-25% от текущего");
                recommendations.push("Рассмотреть бариатрическую хирургию");
            }
            
            let resultHTML = `
                <div class="calculator-value">${bmi}</div>
                <div style="text-align: center; color: var(--text-light); margin-bottom: 20px;">
                    Индекс массы тела
                </div>
                
                <div style="background: ${color}; padding: 15px; border-radius: 8px; margin: 15px 0;">
                    <h4>${category}</h4>
                    <div style="display: grid; gap: 8px;">
                        <div style="display: flex; justify-content: space-between;">
                            <span>Рост:</span>
                            <strong>${height} см</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>Вес:</span>
                            <strong>${weight} кг</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>Формула:</span>
                            <strong>${weight} ÷ (${heightM} × ${heightM})</strong>
                        </div>
                    </div>
                </div>
                
                <div style="background: #f8fafc; padding: 15px; border-radius: 8px;">
                    <h4>📊 Классификация ИМТ:</h4>
                    <ul>
                        <li>Менее 18.5 - Дефицит массы тела</li>
                        <li>18.5 - 24.9 - Нормальная масса тела</li>
                        <li>25.0 - 29.9 - Избыточная масса тела</li>
                        <li>30.0 - 34.9 - Ожирение I степени</li>
                        <li>35.0 - 39.9 - Ожирение II степени</li>
                        <li>40.0 и более - Ожирение III степени</li>
                    </ul>
                </div>
                
                ${recommendations.length > 0 ? `
                <div style="background: #fef3c7; padding: 15px; border-radius: 8px; margin-top: 15px;">
                    <h4>💡 Рекомендации:</h4>
                    <ul>
                        ${recommendations.map(rec => `<li>${rec}</li>`).join('')}
                    </ul>
                </div>
                ` : ''}
            `;
            
            document.getElementById('bmiResult').innerHTML = resultHTML;
            document.getElementById('bmiResult').style.display = 'block';
        }

        document.addEventListener('DOMContentLoaded', function() {
            console.log('Страница диабета загружена');
        });
    </script>
</body>
</html>
